<!DOCTYPE html>
<html lang="en">
  <head id="head">
    <meta charset="utf-8">
    <title id="title">
      All Your Codebase
      | Vini Brasil's Blog
    </title>
    <meta name="description" content="...are belong to us (from &lt;a href=&quot;https://www.youtube.com/watch?v=qItugh-fFgg&quot;&gt;zero wing&lt;/a&gt;)">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@croloris">
    <meta name="twitter:image" content="https://kristoff.it/logo.png">
    <meta name="twitter:author" content="@croloris">
    <meta name="twitter:description" content="...are belong to us (from &lt;a href=&quot;https://www.youtube.com/watch?v=qItugh-fFgg&quot;&gt;zero wing&lt;/a&gt;)">
    <meta name="twitter:title" content="All Your Codebase">
    <meta property="og:title" content="All Your Codebase">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://kristoff.it/logo.png">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&family=Montserrat:wght@700;900&display=swap" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="/main.css?bust2">
    <link type="text/css" rel="stylesheet" href="/highlight.css?bust">
    <link rel="stylesheet" type="text/css" href="/fonts.css">
    <link rel="stylesheet" type="text/css" href="/fira_code.css">
    <link rel="stylesheet" type="text/css" href="/style.css">
    <link rel="stylesheet" type="text/css" href="/highlight.css">
    
    <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
    
    <script defer type="text/javascript" src="https://api.pirsch.io/pirsch.js" id="pirschjs" data-code="CnorXJVVDmhCee3FBtXSQISdHIUmqp3o"></script>
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Y0TCWKTPYJ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-Y0TCWKTPYJ');
    </script>
    
  <link type="text/css" rel="stylesheet" href="/term-highlight.css">

  </head>
  <body>
    <!-- <nav id="menu" class="centered"> -->
    <nav>
      <!-- <a href="/">Home</a>
      •
      <a href="$site.page('quickstart').link()">Get Started</a>
      •
      <a href="$site.page('docs').link()">Documentation</a>
      •
      <a href="$site.page('community').link()">Community</a>
      •
      <a href="$site.page('log').link()">Devlog</a>
      •
      <a href="https://github.com/kristoff-it/zine" target="_blank">
        Code
      </a> -->

      <a href="/">Home</a>
      •
      <a href="/projects/">Posts</a>
      •
      <a href="/research/">Research</a>
      •
      <a href="https://linkedin.com/in/vinicyus-brasil" target="_blank">LinkedIn</a>
      •
      <a href="https://github.com/vinybrasil" target="_blank">Github</a>
      
    </nav>
    <div id="content">
      
  <!-- <div style="display:flex; flex-direction:column; align-items:center;">
    <h1 id="header"><a class="reset-a" href="/">Loris Cro</a></h1>
    <small><i>Personal Website</i></small>
    <div style="display:flex; justify-content:center; font-size:small;">
      <a href="/">About</a>
      	&nbsp; • &nbsp;
      <a href="https://twitter.com/croloris">Twitter</a>
      	&nbsp; • &nbsp;
      <a href="https://twitch.tv/kristoff_it">Twitch</a>
      	&nbsp; • &nbsp;
      <a href="https://youtube.com/c/ZigSHOWTIME/">YouTube</a>
      	&nbsp; • &nbsp;
      <a href="https://github.com/kristoff-it">GitHub</a>
    </div>
  </div> -->
  <h1>All Your Codebase</h1>
  <p class="post-byline">
    <span>December 10, 2024</span>
    •
    <span>3</span>
    min read • by
    <b>Loris Cro</b>
    <span></span>
  </p>
  <div id="post-description">...are belong to us (from <a href="https://www.youtube.com/watch?v=qItugh-fFgg">zero wing</a>)</div>
  <div id="post-body"><p>A while ago I created <a href="https://github.com/allyourcodebase" target="_blank">https://github.com/allyourcodebase</a> (AYC for short), a GitHub Organization that collects <code>build.zig</code> files for C/C++ projects. Those build scripts replace the project’s original build system(s), allowing you to just run <code>zig build</code> to get the project to build successfully.</p><p>One example is the game VVVVVV, whose source code was <a href="https://github.com/TerryCavanagh/VVVVVV/blob/master/LICENSE.md" target="_blank">made available</a> some time ago by the creator. Contributor <a href="https://github.com/marler8997" target="_blank">Johnny Marler</a> created a <code>build.zig</code> for it and now you can build and run the game on macOS, Linux<sup class="footnote-ref"><a href="#fn-1" id="fn-1-ref-1">1</a></sup>, or Windows like so:</p><pre><code>git clone https://github.com/allyourcodebase/VVVVVV
cd VVVVVV
zig build run --release=fast
</code></pre><p><img src="/blog/all-your-codebase/vvvvvv.png" width="752" height="620"></p><p>If you <a href="https://github.com/allyourcodebase/VVVVVV" target="_blank">look at the repo</a>, you will see that it only contains 2 build files: <code>build.zig</code> and <code>build.zig.zon</code>. The first file implements the meat of the build process, while the second is a data file (think <code>package.json</code>) that lists the project’s dependencies.</p><p>That’s thanks to the fact that the Zig build system is also a package manager that can download dependencies and wire everything together as needed. The package manager is still in its early days at the moment of writing (e.g. it doesn’t implement version resolution), but it’s more than complete enough to build complex real-world projects.</p><p>Just to give you an idea, a Zig package dependency can expose to consumers:</p><ul><li>Zig modules (that you can <code>@import()</code> in Zig code)</li><li>Executables (either installed in the output directory or used in a build step)</li><li>Static and dynamic libraries (<code>.a</code>, <code>.so/.dylib/.dll</code>)</li><li>Files (e.g. header files, C source code, but also arbitrary assets)</li></ul><p>When you add as a dependency a repository (or compressed archive) that doesn’t implement a <code>build.zig</code>, then you will be able only to get files from it, which is how the AYC VVVVVV package is able to depend on an upstream repo that has no knowledge of Zig.</p><h2>Goals</h2><p>AYC has two main goals:</p><ul><li>Provide users of the Zig compiler toolchain convenient access to C/C++ projects.</li><li>Show to C/C++ project maintainers how it would look like to replace their build system(s) with Zig and offer them a quick way to get started (they can just upstream the 2 required files).</li></ul><p>That said, like all things in a growing ecosystem, the work is not being done methodically (despite the org’s name), but it’s rather the result of a collective of people scratching their own itch.</p><p>This means that unless somebody needed something implemented (be it as a project or a particular optional setting of a build), chances are that it’s missing, so don’t expect every package to be a fully faithful port of the original build pipeline.</p><h2>Joining the organization</h2><p>Currently to join the organization you need to ping me and the price of admission is one C/C++ repository that you are able to immediately transfer to the AYC organization.</p><p>If you’re unsure how to get in contact, open a thread in <a href="https://github.com/orgs/allyourcodebase/discussions" target="_blank">the Discussions tab</a> mentioning that you want to join and including a link to a repository that is ready to be ported.</p><p>Make also sure to read the <a href="https://github.com/allyourcodebase/" target="_blank">AYC README</a>, as there are some rules about licensing and other minor details.</p><h2>On community…</h2><p>There’s one last reason why I created AYC: to avoid getting in a situation where a C/C++ project maintainer is getting badgered by some users about adding a <code>build.zig</code> file, when the maintainer doesn’t want to.</p><p>As the Zig project grows, it becomes impossible to have full control over everything that happens in the wild, but by being mindful and deliberate in designing what we <em>can</em> control, we can help shape a better ecosystem for everybody, be it Zig users or not.</p></div>
  <div id="footnotes">
    <ol>
      <li id="fn-1">
        <p>On NixOS I needed to enter a shell with <code>pulseaudio xorg.libXext xorg.libX11 libGL</code></p>
        
          <a href="#fn-1-ref-1">1</a>
        
      </li>
    </ol>
  </div>
  <hr>
  <div id="prev-next">
    <span>
      <a href="/blog/advent-of-code-zig/">←
        <span>Advent of Code in Zig</span></a>
    </span>
    <span></span>
    <span></span>
    <small>&nbsp; or &nbsp;</small>
    <small>
      <a href="/">Back to the Homepage</a>
    </small>
  </div>

    </div>
  </body>
</html>